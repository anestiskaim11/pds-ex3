ΠΕΡΙΓΡΑΦΗ ΕΡΓΑΣΙΑΣ

Στην τρέχουσα εργασία μας ζητήθηκε να υπολογίσουμε το μοντέλο Ising ενός φερομανγητικού υλικού. Το μοντέλο αυτό αποτελείται από έναν διδιάστατο πίνακα, ο οποίος περιέχει τα spins(+1 ή -1) του ατόμου. Για να βρεθεί ο πίνακας της επόμενης κατάστασης καθέ στοχείο του πίνακα παίρνει την τιμή της πλειοψηφίας των γειτόνων του και του εαυτού του. Οι κώδικες που αναπτύξαμε για τις 4 διαφορετικές εκδόσεις που μας ζητήθηκαν βρίσκονται στo Github.

ΣΕΙΡΙΑΚΗ ΕΚΔΟΣΗ(V0)

Στην πρώτη έκδοση μας ζητήθηκε ο σειριακός υπολογισμός για κάθε σημείο για μέγεθος πίνακα nxn και για k επαναλήψεις. Αφού δημιουργήσουμε τυχαία τον πίνακα, φτιάχνουμε και έναν δεύτερο πίνακα ίδιου μεγέθους, ώστε να αποθηκεύουμε το νέο Ising μοντέλο και στο τέλος κάθε επανάληψης τους ανταλλάζουμε για την επόμενη επανάληψη. Στην εύρεση τον 4 γειτόνων, μετα την υπόδειξη να μην χρησιμοποιήσουμε if statements για τις οριακές συνθήκες(αφού ο πίνακας είναι δακτυλιοειδής),χρησιμοποιήθηκαν στις συντεταγμένες οι όροι (i+n)%n( προσαρμόζονται ανάλογα ποιον γείτονα θέλουμε).Στους όρους αυτούς το +n υπάρχει για να απογευχθούν αρνητικές τιμές και το %n για να μην ξεπεράσουμε το μέγεθος του πίνακα.
     
ΕΝΑ ΣΗΜΕΙΟ ΑΝΑ ΝΗΜΑ(V1)

Στην δεύτερη έκδοση κάθε νήμα σε κάθε μπλοκ υπολογίζει την επόμενη τιμή ενός μόνο σημείου.Σε αυτή αλλά και στις επόμενες εκδόσεις που χρησιμοποιείται η GPU ο πίνακας είναι μονοδίαστατος αλλά θεωρείται ως διδιάστατος μέσω του μετασχηματισμού i*n + j. Αφού δεσμεύσουμε μνήμη στην GPU για τους πίνακες, ελέγχουμε πόσα blocks πρέπει να δημιουργήσουμε (αφού κάθε block έχει όριο 1024 νήματα).Στην συνέχεια φορτώνουμε τα δεδομένα απο την CPU στην GPU, καλούμε την συνάρτηση στην GPU με τα ανάλογα blocks και νήματα και επιστρέφουμε τα δεδομένα στην CPU.

ΕΝΑ BLOCK ΣΗΜΕΙΩΝ ΑΝΑ ΝΗΜΑ(V2)

Σε αυτή την έκδοση, κάθε νήμα υπολογίζει ένα b*bblock σημείων. Στην πραγματικότητα, αυτή η έκδοση αποτελεί την γενική περίπτωση της πρώτης. Η λογική είναι η ίδια με της πρώτης, με την μόνη διαφορά ότι δημιουργούνται
(n*n) νήματα αντί για n*n. ( b*b)

ΚΟΙΝΗ ΜΝΗΜΗ ΑΝΑΜΕΣΑ ΣΤΑ ΝΗΜΑΤΑ(V3)

Στην τελευταία έκδοση, για να μειώσουμε τον χρόνο από το ανέβασμα των δεδομένων χρησιμοποιούμε shared memory στην οποία ανεβαίνουν τα δεδομένα και έχουν πρόσβαση όλα τα νήματα. Ορίζεται αριθμός b και δημιουργούνται υποπίνακες b*b, οι οποίοι επεξεργάζονται από ξεχωριστά block της gpu. Οι shared memories των block έχουν διαστάσεις
(b + 2)*(b + 2) καθώς συμπεριλαμβάνουν και τα σημεία γύρω γύρω από το block για ευκολία πρόσβασης.
ΑΠΟΤΕΛΕΣΜΑΤΑ

Καθόλη την διάρκεια της εργασίας θεωρήσαμε ότι τα n και b είναι δυνάμεις του 2. Για την εξέταση του κώδικα χρησιμοποιήθηκε σε κάθε μια έκδοση
πίνακα n=2048 και k=100 με διαφορετικά b. Το μέγιστο b είναι 32 καθώς και το B στην έκδοση v3 είναι Β = b+2.
